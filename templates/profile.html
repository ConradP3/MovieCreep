[[extend 'layout.html']]
<style>
  [v-cloak] {
    display: none;
  }
</style>

<div class="section">

  <h1 class="title">Profile</h1>

  <div class="section" id="vue-target" v-cloak>
    <div v-if="!selection_done" class="field has-addons block">
      <p class="control">
      <div class="file is-info">
        <label class="file-label">
          <input class="file-input" type="file" accept=".jpg, .png, .jpeg, .gif, .bmp, .tif, .tiff|image/*"
            @change="select_file($event)">
          <span class="file-cta">
            <span class="file-label">
              <span>Change Profile Picture</span>
            </span>
          </span>
        </label>
      </div>
      </p>
    </div>
    <template v-if="selection_done && !uploaded">
      <div class="block">
        <img width="400" :src="img_url" />
      </div>
      <div class="block">
        <button class="button is-success" :disabled="uploading" @click="upload_file">
          <span class="icon is-small">
            <i v-if="!uploading" class="fa fa-upload"></i>
            <i v-if="uploading" class="fa fa-spinner fa-pulse fa-fw"></i>
          </span>
          <span>Confirm</span>
        </button>
      </div>
    </template>
    <div v-if="uploaded">
      <i class="fa fa-check"></i> Uploaded!
    </div>
  </div>


  <a class="button is-light is-small" href="[[=URL('auth/profile')]]">
    <span class="icon"><i class="fa fa-fw fa-pencil"></i></span> <span>Edit Info</span>
  </a>

  <h3 class="subtitle">
    User Name: [[=name]]
    <br />
    User Email: [[=email]]
  </h3>
  </h2>

  <br />

  <h2 class="title is-4 is-spaced">My Friends
    <h3 class="subtitle">

    </h3>



    <!-- Sub nav tabs for later maybe

  <div class="tabs is-small">
    <ul>
    <li href="[[=URL('my_info')]]"><a>My Info</a></li>
    <li><a>Friends</a></li>
    <li><a>Watch List</a></li>
  </ul>
  </div>

   -->



</div>


[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
  let file_upload_url = "[[=XML(file_upload_url)]]";
</script>
<script src="js/profile.js"></script>
[[end]]