[[extend 'layout.html']]

<style>
  [v-cloak] {
    display: none;
  }
</style>
<div id="vue-target" v-cloak>
<div class="section" >

  <div class="field has-addons is-pulled-right mr-6">
    <p class="control">
      <button class="button is-info" @click="set_view(-1)" v-if="view_mode === -1">
        <div class="tooltip">
          <i class="fa fa-bars"></i>
          <span class="tooltiptext icon is-small">
            All Recommendations
          </span>
        </div>
      </button>
    </p>
    <p class="control">
      <button class="button is-light" @click="set_view(-1)" v-if="view_mode != -1">
        <div class="tooltip">
          <i class="fa fa-bars"></i>
          <span class="tooltiptext icon is-small">
            All Recommendations
          </span>
        </div>
      </button>
    </p>
    <p class="control">
      <button class="button is-info" @click="set_view(0)" v-if="view_mode === 0">
        <div class="tooltip">
          <i class="fa fa-user"></i>
          <span class="tooltiptext icon is-small">
            Similar Movie Recommendations Based on Watch List
          </span>
        </div>
      </button>
    </p>
    <p class="control">
      <button class="button is-light" @click="set_view(0)" v-if="view_mode != 0">
        <div class="tooltip">
          <i class="fa fa-user"></i>
          <span class="tooltiptext icon is-small">
            Similar Movie Recommendations Based on Watch List
          </span>
        </div>
      </button>
    </p>
    <p class="control">
      <button class="button is-info" @click="set_view(1)" v-if="view_mode === 1">
        <div class="tooltip">
          <i class="fa fa-video-camera "></i>
          <span class="tooltiptext icon is-small">
            Movies Other Users Have Seen
          </span>
        </div>
      </button>
    </p>
    <p class="control">
      <button class="button is-light" @click="set_view(1)" v-if="view_mode != 1">
        <div class="tooltip">
          <i class="fa fa-video-camera "></i>
          <span class="tooltiptext icon is-small">
            Movies Other Users Have Seen
          </span>
        </div>
      </button>
    </p>
  </div>
</div>

<div class="container">

  <h1 class='title'><B>Movie Recommendations</B>
    <h1>
      <div class='is-pulled-right'>
        <a class="button is-info" href="[[=URL('add_movie')]]">
          <span class="icon"><i class="fa fa-plus"></i></span>
          <span>Add New Movie</span>
        </a>
      </div>
      <br />
      <div v-if="view_mode===0 || view_mode===-1">
        <h1><B>Similar Movies Based on Watch List</B>
          <h1>
            [[for row in reversed(content_based_recommendations):]]
            [[if row.recommended: ]]
            <div class="container block">
              <div class="box has-background-white-ter box-shadow">
                <img src="[[=row.link]]" width="142">
                <div class="tooltip"> <i class='fa fa-exclamation-circle'></i>
                  <span class="tooltiptext is-pulled-left">
                    <!-- plot, runtime, releasedate, rating, imbdbrating, genre -->
                    <p><B>[[=row.recommended[-1] ]]</B></p>
                    <p><B>Rated: [[=row.rating]]</B></p>
                    <p><B>Released:[[=row.releasedate]]</B></p>
                    <p><B>Runtime: [[=row.runtime]]</B></p>
                    <p><B>Genre: [[=row.genre]]</B></p>
                    <p><B>[[=row.plot]]</B></p>
                  </span>
                </div>
                <p><B>[[=row.recommended[-1] ]]</B></p>
                <p>Recommended because you added [[=row.movie_title]] to your list.</p>
                <br />
                <br />

              </div>

            </div>
            [[else:]]
            [[pass]]


            [[pass]]

            </br />
      </div>
      <div v-if="view_mode===1 || view_mode===-1">
        <h1><B>Movies Based on Other User Profiles</B></h1>
        [[for row in reversed(rows):]]
        <div class="container block">
          <div class="box has-background-white-ter box-shadow">
            <!-- <img src="./images/logo.png"> -->
            <img src="[[=row.link]]" width="142">
            <div class="tooltip"> <i class='fa fa-exclamation-circle'></i>
              <span class="tooltiptext is-pulled-left">
                <!-- plot, runtime, releasedate, rating, imbdbrating, genre -->
                <p><B>[[=row.movie_title]]</B></p>
                <p><B>Rated: [[=row.rating]]</B></p>
                <p><B>Released:[[=row.releasedate]]</B></p>
                <p><B>Runtime: [[=row.runtime]]</B></p>
                <p><B>Genre: [[=row.genre]]</B></p>
                <p><B>[[=row.plot]]</B></p>
              </span>
            </div>
            <p><B>[[=row.movie_title]]</B></p>
            <p> [[if row.watch_list_watched:]]Recommended because [[=row.watch_list_user_name]] watched.
              [[else:]]
              Reccommended because [[=row.watch_list_user_name]] added this to their profile.
              [[pass]]
            </p>
            <p>[[=row.watch_list_date]]</p>



            <br />
            <br />
            <a class="is-pulled-right">
              <p>[[=row.watch_list_time_stamp]]</p>
            </a>
            <br />

          </div>
          [[pass]]

        </div>
      </div>
</div>
<br />
</div>
[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
  let add_movie_url = "[[=XML(add_movie_url)]]";
  let get_rating_url = "[[=XML(get_rating_url)]]";
  let set_rating_url = "[[=XML(set_rating_url)]]";
</script>
<script src="js/movie_reccomendations.js"></script>
[[end]]


<!-- https://www.w3schools.com/howto/howto_css_tooltip.asp -->
<style>
  /* Tooltip container */
  .tooltip {
    position: relative;
    display: inline-block;
    border-bottom: 1px dotted black;
    /* If you want dots under the hoverable text */
  }

  /* Tooltip text */
  .tooltip .tooltiptext {
    visibility: hidden;
    width: 400px;
    background-color: #555;
    color: #fff;
    text-align: Left;
    padding: 5px 0;
    border-radius: 6px;

    /* Position the tooltip text */
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    margin-left: -60px;

    /* Fade in tooltip */
    opacity: 0;
    transition: opacity 0.3s;
  }

  /* Tooltip arrow */
  .tooltip .tooltiptext::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: #555 transparent transparent transparent;
  }

  /* Show the tooltip text when you mouse over the tooltip container */
  .tooltip:hover .tooltiptext {
    visibility: visible;
    opacity: 1;
  }
</style>